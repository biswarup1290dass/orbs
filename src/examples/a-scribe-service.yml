description: >
  Scribe provides a set of services to store, verify and manage the supply chain integrity.
  Following is a full integration example.

  Use `setup_remote_docker` step (Optional) to allow access to a local docker daemon.
  Otherwise image targets is read directly from remote registry.

usage:
  version: 2.1
  orbs:
    scribe: scribe-security/orbs@x.y.z

  workflows:
    scribe-service-job:
      jobs:
        - checkout
        - setup_remote_docker # Optional
        - scribe/install
        - run:
            name: custom checkout
            command: |
              git clone -b v1.0.0-alpha.4 --single-branch https://github.com/mongo-express/mongo-express.git --depth=1 mongo-express-scm
        - scribe/bom:
            target: dir:mongo-express-scm
            verbose: 2
            scribe-enable: true
            scribe-client-id: $SCRIBE_CLIENT_ID
            scribe-client-secret: $SCRIBE_CLIENT_SECRET
        - scribe/bom:
            target: mongo-express:1.0.0-alpha.4
            verbose: 2
            scribe-enable: true
            scribe-client-id: $SCRIBE_CLIENT_ID
            scribe-client-secret: $SCRIBE_CLIENT_SECRET
