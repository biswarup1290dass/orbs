description: >
  Generate Software Bill Of Materials (SBOM) for container images, filesystems and git repositories.

usage:
  version: 2.1
  orbs:
    scribe: scribe-security/orbs@1.2.3

  workflows:
    scribe-sbom-target-job:
      jobs:
        - checkout

        # Install scribe tool
        - scribe/install

        # Create SBOM for remote `busybox:latest` image.
        - scribe/bom:
            target: busybox:latest
            verbose: 2
            force: true

        # Create SBOM for a local directory.
      - run:
          name: custom checkout
          command: |
            mkdir testdir
            echo "test" > testdir/test.txt

        - scribe/bom:
            target: dir:.
            verbose: 2
            force: true

        # Create SBOM for `mongo-express` remote git repository.
        - scribe/bom:
            target: git:https://github.com/mongo-express/mongo-express.git
            verbose: 2
            force: true

        # Create SBOM for checked out local git repository.
        - scribe/bom:
            target: git:.
            verbose: 2
            force: true

